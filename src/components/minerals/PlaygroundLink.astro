---
/**
 * PlaygroundLink - CTA to open mineral CDL in the playground
 */
import type { Mineral } from '../../lib/db';

interface Props {
  mineral: Mineral;
}

const { mineral } = Astro.props;

// Encode CDL for URL
const encodedCDL = encodeURIComponent(mineral.cdl || '');
const playgroundUrl = `/playground?cdl=${encodedCDL}`;
---

<div class="bg-gradient-to-br from-sky-50 to-cyan-50 rounded-xl border border-sky-100 p-6">
  <div class="flex items-start gap-4">
    <div class="p-3 bg-sky-100 rounded-lg">
      <svg class="w-6 h-6 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </div>
    <div class="flex-1">
      <h3 class="font-semibold text-slate-900 mb-1">Interactive Preview</h3>
      <p class="text-sm text-slate-600 mb-4">
        Open this crystal in the CDL Playground to rotate, export, and explore in 3D.
      </p>
      <a
        href={playgroundUrl}
        class="inline-flex items-center gap-2 px-4 py-2 bg-sky-600 text-white rounded-lg font-medium hover:bg-sky-700 transition-colors"
      >
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
        Open in Playground
      </a>
    </div>
  </div>

  {mineral.cdl && (
    <div class="mt-4 pt-4 border-t border-sky-200">
      <label class="block text-xs font-medium text-slate-500 mb-1">CDL Notation</label>
      <code class="block text-sm text-sky-800 font-mono break-all">
        {mineral.cdl}
      </code>
    </div>
  )}
</div>
