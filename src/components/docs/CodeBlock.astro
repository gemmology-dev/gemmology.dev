---
import { Code } from 'astro:components';

interface Props {
  code: string;
  lang?: 'python' | 'bash' | 'typescript' | 'json' | 'text' | 'javascript' | 'html' | 'css' | 'shell' | 'cdl';
  title?: string;
}

const { code, lang = 'text', title } = Astro.props;
---

<div class="code-block-wrapper">
  {title && <div class="code-title">{title}</div>}
  <Code
    code={code.trim()}
    lang={lang}
    theme="one-dark-pro"
  />
</div>

<style>
  .code-block-wrapper {
    @apply my-6;
  }

  .code-title {
    @apply bg-slate-800 text-slate-300 text-sm px-4 py-2 rounded-t-xl border-b border-slate-700;
  }

  .code-block-wrapper :global(pre) {
    @apply !rounded-xl !my-0 !p-4;
  }

  .code-title + :global(pre) {
    @apply !rounded-t-none;
  }
</style>
