---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { ProtectedGallery } from '../../components/auth/ProtectedGallery';

const url = Astro.url;
const initialSystem = url.searchParams.get('system') || '';
const initialSearch = url.searchParams.get('search') || '';

// Always point to base gallery URL as canonical to prevent duplicate content from filters
const canonicalURL = 'https://gemmology.dev/gallery';
---

<BaseLayout
  title="Crystal Gallery"
  description="Explore 50+ mineral presets with FGA-accurate crystallographic data and interactive visualizations."
  canonical={canonicalURL}
>
  <ProtectedGallery
    client:load
    initialSystem={initialSystem}
    initialSearch={initialSearch}
  />
</BaseLayout>
