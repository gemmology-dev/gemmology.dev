---
import BaseLayout from '../layouts/BaseLayout.astro';
import { ProtectedPlayground } from '../components/auth/ProtectedPlayground';

// Get CDL from query string if present
const url = new URL(Astro.request.url);
const initialCDL = url.searchParams.get('cdl') || undefined;
---

<BaseLayout
  title="CDL Playground"
  description="Interactive Crystal Description Language editor with live preview, syntax highlighting, and multi-format export."
>
  <div class="h-[calc(100vh-4rem)]">
    <ProtectedPlayground client:load initialCDL={initialCDL} />
  </div>
</BaseLayout>

<style>
  /* Make playground take full height */
  :global(main) {
    display: flex;
    flex-direction: column;
  }
</style>
